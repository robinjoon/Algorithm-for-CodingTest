# 누적합
- 배열의 특정 구간의 원소들의 합을 빠르게 구하는 알고리즘.
- O(1)에 특정 구간의 부분합을 구할 수 있다.
- 배열의 여러 구간의 부분합을 알아야 할 경우 사용한다.
- 특정 한개 구간의 부분합을 알아야 할 때에는 사용할 필요가 없다.

## 알고리즘 설명
전처리 과정과 계산 과정으로 나뉜다.
- 전처리 과정 : O(n)
    - arr 배열의 누적 합을 저장하는 sum 배열을 만든다.
    - 이 때 sum[i] = arr[0] ~ arr[i] 까지 원소들의 합이다.
    - 따라서, sum[i] = sum[i-1] + arr[i] 이다.
- 계산 과정 : O(1)
    - arr[l] ~ arr[r] 까지의 합은 sum[r] - sum[l-1] 이다.
    - 단, l이 0일 경우 sum[r] 이다.
### sum 배열 만드는 코드
```JAVA
int[] arr = {1,2,3,4,5,6};
int[] sum = new int[arr.length];
sum[0] = arr[0];
for(int i=1;i<sum.length;i++){
    sum[i] = sum[i-1]+arr[i];
}
```
### l부터 r까지의 부분합을 구하는 코드
```JAVA
int getPrefixSum(int l, int r, int[] sum){
    if(l>0){
        return sum[r]-sum[l-1];
    }else{
        return sum[r];
    }
}
```
## 이차원 배열로의 확장
- 이차원 이상의 배열로 확장하는 경우에도 비슷하게 사용된다.
- S[i][j] = arr[0][0] ~ arr[i][j] 까지의 합이다.
- 즉, 사각형 범위의 합이다.

단, 특정 구간의 합을 구하는 방법이 일차원 배열과는 조금 다르다.
<img src="이차원 누적합.jpeg">
이 그림에서 볼 수 있듯, arr[x1][y1] ~ arr[x2][y2] 범위의 합을 1차원 배열때와 비슷한 방식으로 계산하면, arr[0][0] ~ arr[x1][y1] 범위의 합이 두번 빠지게 된다. 따라서 이차원 배열에서의 arr[x1][y1] ~ arr[x2][y2] 범위의 합은 다음 식으로 계산한다.

    Range(x1, y1, x2, y2) = S[x2][y2] - S[x1][y2] - S[x2][y1] + S[x1][y1]
## 누적합 알고리즘의 한계
    배열의 값이 변경되면 누적합을 다시 계산해야 한다.